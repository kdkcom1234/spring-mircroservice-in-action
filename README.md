# 스프링 마이크로 서비스 코딩 공작소(Spring Microservice in Action 2nd Edition)


## 1장 스프링, 클라우드와 만나다
- 마이크로 서비스 아키텍처 개념
- 마이크로 서비스 개발, 라우팅, 클라이언트 회복성, 보안 패턴
- 마이크로 서비스 로깅과 추적, 지표, 빌드/배포 패턴


## 2장 스프링 클라우드와 함께 마이크로서비스 세계 탐험

1. 스프링 클라우드 요소들에 대한 개념
  - 스프링 클라우드 컨피그, 서비스 디스커버리, 로드 밸런서, Resillence4j
  - 스프링 클라우드 게이트웨이, 스트림, 슬루스, 시큐리티
  - Resillence4j: 회로 차단기, 재시도, 벌크헤드 등 클라이언트 회복성 패턴 구현
  - 슬루스(Sleuth): 상관관계ID(correlation ID)로 트랜잭션 추적

2. 클라우드 네이티브 마이크로서비스 구축 방법
  - 12 팩터 앱 모범 사례 활용(https://12factor.net)
  - 코드베이스: 단일 코드베이스, 배포 환경(개발, 운영 등) 포함, 다른 마이크로 서비스와 공유하지 않음
  - 의존성: 의존성 관리도구를 이용하여 동일한 라이브러리 버전으로 마이크로서비스를 빌드함
  - 구성정보: 구성정보를 배포할 마이크로서비스와 분리해서 관리
  - 백엔드 서비스: 데이터베이스, 메시징 시스템과 같은 서드파티와 연결할 때 코드 변경없이 교체 가능해야함
  - 빌드, 릴리스, 실행: 코드가 빌드되면 변경 사항은 빌드 프로세스를 거쳐 재배포되어야 하고 빌드된 서비스는 변경 불가
  - 프로세스: 마이크로 서비스는 무상태이며, 상태 저장의 요구사항이 있다면 레디스 같은 캐시나 백업 데이터베이스를 사용
  - 포트 바인딩: 특정 포트로 서비스를 게시, 실행 파일로 패키징된 런타임. 명령줄을 통해 앱서버 없이 실행
  - 동시성: 프로세스를 많이 생성하여 서비스 부하를 분산, 스케일업과 스케일아웃
  - 폐기 가능: 다른 서비스에 영향을 주지 않고 새로운 인스턴스로 실행 및 실패한 인스턴스를 제거
  - 개발 및 운영 환경 일치: 각 환경의 배포 버전이 유사하여 개발환경과 운영 환경으로 신속히 이동할 수 있어야 함
  - 로그: 마이크로서비스는 표준출력(stdout)으로 로그를 기록하는데 집중하고, 로그를 관리하는 별도 도구로 관리한다. 
  - 관리 프로세스: 서비스 관리작업은 코드 저장소에 유지되는 스크립트로 수행해야 한다.

## 3장 스프링 부트로 마이크로서비스 구축하기
1. 프로젝트 기본 구성
  - 버전: 자바11, 스프링부트. 2.2.3
    - 본인은 자바17(코틀린), 스프링부트 3.2.2 로 작업함
  - 빌드도구: Maven
  - 의존성: Spring Web, Actuator, Lombok(코틀린을 사용하여 미사용함)

2. 프로젝트 작성
  - Controller(GET, POST, PUT, DELETE), POJO 클래스, Service 작성
  - mvn spring-boot:run
  - 국제화(i18n) 구현: LocaleResolver, ResourceBundleMessageSource를 사용
  - HATEOAS 구현: RepresentationModel을 사용
  - 액추에이터 설정: base-path, 활성 기능 설정

## 4장 도커
